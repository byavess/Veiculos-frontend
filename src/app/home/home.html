<!-- Hero Banner -->
<section class="hero-banner">
  <div class="hero-overlay">
    <div class="hero-content">
      <h1 class="hero-title">Encontre o carro dos seus sonhos</h1>
      <p class="hero-subtitle">+ de 50 veículos seminovos com garantia e procedência</p>

      <!-- Barra de Busca -->
      <div class="search-bar">
        <mat-form-field appearance="outline" class="search-input">
          <mat-label>Buscar por marca ou modelo</mat-label>
          <input matInput [(ngModel)]="marcaFiltro.marca" placeholder="Ex: BMW, Honda, Toyota...">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
        <button mat-raised-button color="accent" class="search-btn" (click)="aplicarFiltros()">
          Buscar Veículos
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Destaques -->
<section class="features-section">
  <div class="container">
    <div class="features-grid">
      <div class="feature-item">
        <mat-icon class="feature-icon">verified</mat-icon>
        <h3>Veículos Verificados</h3>
        <p>Garantia de procedência e qualidade</p>
      </div>
      <div class="feature-item">
        <mat-icon class="feature-icon">paid</mat-icon>
        <h3>Financiamento</h3>
        <p>Parcele em até 60 meses</p>
      </div>
      <div class="feature-item">
        <mat-icon class="feature-icon">security</mat-icon>
        <h3>Compra Segura</h3>
        <p>Todo processo acompanhado</p>
      </div>
    </div>
  </div>
</section>

<!-- Vitrine de Veículos -->
<section class="vehicles-section">
  <div class="container">
    <h2 class="section-title">Veículos em Destaque</h2>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Carregando veículos...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="erroCarregamento && !loading" class="error-state">
      <mat-icon color="warn">error_outline</mat-icon>
      <h3>Erro de Conexão</h3>
      <p>Não foi possível carregar os veículos. Verifique se o backend está rodando.</p>
      <button mat-raised-button color="primary" (click)="carregarVeiculos()">
        Tentar Novamente
      </button>
    </div>

    <!-- Grid de Veículos -->
    <div class="vehicles-grid" *ngIf="!loading && !erroCarregamento">
      <mat-card *ngFor="let veiculo of veiculos | async" class="vehicle-card">
        <div class="vehicle-image">
          <img
            [src]="veiculo.urlsFotos && veiculo.urlsFotos.length > 0 ? getImagemUrl(veiculo.urlsFotos[0]) : 'https://placehold.co/600x400?text=Sem+Foto'"
            [alt]="veiculo.marca + ' ' + veiculo.modelo"
            class="vehicle-img"
            (error)="onImageError($event)">
          <div class="vehicle-badge">{{ veiculo.ano }}</div>
        </div>

        <mat-card-content class="vehicle-content">
          <h3 class="vehicle-name">{{ veiculo.marca }} {{ veiculo.modelo }}</h3>
          <p class="vehicle-description">{{ veiculo.descricao }}</p>

          <div class="vehicle-details">
            <span class="vehicle-color">
              <mat-icon>palette</mat-icon>
              {{ veiculo.cor || 'Cor não informada' }}
            </span>
          </div>

          <div class="vehicle-price">
            {{ veiculo.preco | currency:'BRL':'symbol':'1.2-2':'pt' }}
          </div>
        </mat-card-content>

        <mat-card-actions class="vehicle-actions">
          <button mat-flat-button color="primary" class="details-btn" [routerLink]="['/details', veiculo.id]">
            <mat-icon>visibility</mat-icon>
            Ver Detalhes
          </button>
          <button mat-stroked-button color="primary" class="contact-btn">
            <mat-icon>whatsapp</mat-icon>
            Contato
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- Empty State -->
    <div *ngIf="!(veiculos | async)?.length && !loading && !erroCarregamento" class="empty-state">
      <mat-icon>search_off</mat-icon>
      <h3>Nenhum veículo encontrado</h3>
      <p>Tente ajustar os filtros de busca</p>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="main-footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h4>Seminovos</h4>
        <p>Há mais de 10 anos no mercado de veículos seminovos com qualidade e confiança.</p>
      </div>
      <div class="footer-section">
        <h4>Contato</h4>
        <p><mat-icon>phone</mat-icon> (11) 9999-9999</p>
        <p><mat-icon>email</mat-icon> contato&#64;rcarseminovos.com.br</p>
      </div>
      <div class="footer-section">
        <h4>Horário de Funcionamento</h4>
        <p>Segunda a Sexta: 8h às 18h</p>
        <p>Sábado: 8h às 12h</p>
      </div>
    </div>
  </div>
</footer>
